<!DOCTYPE html>
<htmllang="en">

    <head>
        <link rel="stylesheet"href="style.css">
            <script scr="http://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    </head>

    <body>
        <div class="container">
            <header>
                <img id='logo'src=""alt="logo">
                    <div id='searchbox'>search box</div>
                        <button>Login</button>
                        <button>Registration</button>
            </header>
            <aside>
                <div class="filter">filter</div>
                    <div class="filter">filter</div>
                        <div class="filter">filter</div>
            </aside>
            <main>
                <div class="product">product</div>
                    <div class="product">product</div>
                        <div class="product">product</div>
                            <div class="product">product</div>
                                <div class="product">product</div>
                                    <div class="product">product</div>
            </main>
            </div>
    </body>

    </html>
    <div id="userform">
        <spanv-if='currentUser'>
            {{currentUser}}
            <button @click='signout'>Sign out</button>
                </span>
                <spanv-else>
                    email <input v-model='email'>
                        password <input type='password'v-model='password'>
                            <button v-on:click='signin'>Sign in</button>
                            <input type="radio" id="option1" value="student" v-model="userType"></input>
                            <label for="option1" > Provider</label>
                            <input type="radio" id="option2" value="provider" v-model="userType"></input>
                            <label for="option2" > Provider</label>
                            <button v-on:click='signup'>Sign up</button>
                                    {{userMessage}}
                                    </span>
    </div>

    <script>
        var userform = new Vue({
            el: "#userform",
            data: {
                currentUser: '',
                email: '',
                password: '',
                userMessage: ''
            },
            methods: {
                signup: function () {
                    this.userMessage = '';

                    // more validation should be included
                    if (!this.email) {
                        this.userMessage = 'error: empty email'; return
                    }
                    if (!this.password) {
                        this.userMessage = 'error: empty password';
                        return;
                    }
                    var newUser = {
                        'email': this.email, 'password': this.password
                    }
                    // a user array should be used
                    localStorage.setItem('users', JSON.stringify(newUser))
                },

                var users = '',
                var newEmail = this.email,

                if(localStorage.getItem('users'));    // 'users' is an array of objects
        users = JSON.parse(localStorage.getItem('users'));

        if (users) {
            if (users.some(function (user) { returnuser.email === newEmail })) {
                alert('Email already exists!');
                return;
            }
            users.push({ 'email': newEmail, 'password': this.password });
            localStorage.setItem('users', JSON.stringify(users));
        }
        else {
            users = [{ 'email': newEmail, 'password': this.password }];
            localStorage.setItem('users', JSON.stringify(users));

        }
        signin: function () {
            var savedUser = JSON.parse(localStorage.getItem('users'));
            if (savedUser.email == this.email && savedUser.password == this.password) {
                this.currentUser = this.email;
            }
            else {
                this.userMessage = ' error: username or password is not correct.'; return;
            }
        }
        signout: function () {
            this.currentUser = '';
            this.email = '';
            this.password = '';
        }
    </script>
